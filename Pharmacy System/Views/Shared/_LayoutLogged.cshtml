@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap-grid.css" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap-reboot.css" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap-utilities.css" />
    <link rel="stylesheet" href="~/css/Jquery-ui.css" />
    <!-- google font -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900&display=swap" rel="stylesheet">
    <!-- end google font -->
    <!-- font awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <!-- end font awesome -->
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
</head>
<body>
    
    <div id="fldataloader" style="display: none;" class="checkoutloader offset-md-4">
        <span>
            <img alt="" src="~/images/Loader.gif" />
        </span>
    </div>
    <div class="sitepagetopblueLine"></div>
    <div class="container1S">
        <div class="row dvheadSection">
            <div class="col-sm-3"></div>
            <div id="dvTopHeading" class="col-sm-6 toplogoandgreentext alignheaderCenter">
                <img class="toplogo " src="~/images/logo.png" />
                <p class="sitetopbargreen">Nawaloka Medicare</p>
            </div>
            <div class="dvloggedSection col-sm-3 showinsameline mt-3">
                @{

                    var sessionValue = HttpContextAccessor.HttpContext.Session.GetString("loggeduser");
                    if ((sessionValue != "none") || (sessionValue != null))
                    {
                                    <div id="dvWelcomeLarge" class="welcomemsg"><i class="fas fa-user"></i> Hi! Welcome @sessionValue</div>
                                    <div class="logoutText"><a asp-action="Logout" asp-controller="Users">LOGOUT</a></div>
                    }
                }
            </div>
            @* <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
                <div class="container-fluid">
                    <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index">Pharmacy_System</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                            aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
                        <ul class="navbar-nav flex-grow-1">
                            <li class="nav-item">
                                <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Index">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav> *@
        </div>
        <div class="row">
            <div>
                <a id="showMenuLink" class="icon" onclick="showMenu()">
                    <i class="fa fa-bars fa-lg"></i>
                </a>
            </div>
            <div class="topnav d-none" id="siteTopnav">
                <div class="welcomemsg"><i class="fas fa-user"></i> Hi! Welcome @sessionValue</div>
                @Html.ActionLink("PATIENTS", "Create", "OurPatients", new { area = "" }, new { @class = "nav-link leftmenuitem", id = "smallMenuPatients" })
                @Html.ActionLink("INACTIVE PATIENTS", "InactivePatients", "OurPatients", new { area = "" }, new { @class = "nav-link leftmenuitem", id = "smallMenuInactivePatients" })
                @Html.ActionLink("LOYALTY PROGRAMME", "Index", "LoyaltyPrograms", new { area = "" }, new { @class = "nav-link leftmenuitem", id = "smallMenuLoyaltyPrograms" })
                @Html.ActionLink("CHANGE PASSWORD", "ChangePassword", "Users", new { area = "" }, new { @class = "nav-link leftmenuitem", id = "smallMenuChangePassword" })
                @Html.ActionLink("LOGOUT", "Logout", "Users", new { area = "" }, new { @class = "nav-link leftmenuitem", id = "smallMenuLogout" })


            </div>

        </div>
    </div>
    <div class="container1 body-content">
        <div id="dvSideBarContainer">      
             <div id="box" style="width:100px;height:200px;position:absolute;top:120px;left:0px;">
                <div id="cover" style="position:absolute;width:0;height:0;z-index:50;">
                    <div class="sidebar mt-2" style="border-radius:7px">
                        @Html.ActionLink("MEDICINES", "Index", "Medicines", new { area = "" }, new { @class = "nav-link leftmenuitem", id = "mnuMedicines" })
                        @Html.ActionLink("PURCHASES", "Index", "Purchases", new { area = "" }, new { @class = "nav-link leftmenuitem", id = "mnuPurchases" })
                        @Html.ActionLink("SALES", "Index", "Sales", new { area = "" }, new { @class = "nav-link leftmenuitem", id = "mnuSales" })
                        @Html.ActionLink("STOCKS", "Index", "Stocks", new { area = "" }, new { @class = "nav-link leftmenuitem", id = "mnuStocks" })
                        @Html.ActionLink("SUPPLIERS", "Index", "Suppliers", new { area = "" }, new { @class = "nav-link leftmenuitem", id = "mnuSuppliers" })
                        @Html.ActionLink("USERS", "Index", "Users", new { area = "" }, new { @class = "nav-link leftmenuitem", id = "mnuUsers" })
                        @Html.ActionLink("USER TYPES", "Index", "UsersTypes", new { area = "" }, new { @class = "nav-link leftmenuitem", id = "mnuUsersTypes" })
                        @Html.ActionLink("BRANDS", "Index", "Brands", new { area = "" }, new { @class = "nav-link leftmenuitem", id = "mnuBrands" })
                        @Html.ActionLink("MANUFACTURER", "Index", "Manufacturers", new { area = "" }, new { @class = "nav-link leftmenuitem", id = "mnuManufacturer" })
                    </div>
                </div>
            </div> 

    </div> 
       
        <!-- Page content -->
        <div class="content">
            @RenderBody()
        </div>
    </div>
   
    <footer class="border-top footer text-muted1">
        <div class="container-fluid">
            <div class="row">
                <div class="col-xl-3 col-lg-3 col-md-6 col-sm-6 col-xs-12 block">
                </div>

                <div class="col-xl-3 col-lg-3 col-md-6 col-sm-6 col-xs-12 block">
                </div>

                <div class="col-xl-4 col-lg-3 col-md-6 col-sm-6 col-xs-12 block">
                </div>

                <div class="col-xl-2 col-lg-3 col-md-6 col-sm-6 col-xs-12 block social_media">
                </div>
            </div>

            <div class="row bottom_bar">
                <div class="coll-sm-3"></div>
                <div class="coll-sm-6 footercopywrite">&copy; @DateTime.Now.Year - Nawaloka Medicare</div>
                <div class="coll-sm-3"></div>

            </div>
        </div>
    </footer>
    @* @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap") *@
    <script type="text/javascript" src="~/lib/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="~/lib/jquery/dist/jquery.min.js"></script>

    <script type="text/javascript" src="~/lib/jquery/dist/jquery-ui.js"></script>
    <script type="text/javascript" src="~/js/site.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>

    @RenderSection("scripts", required: false)
    @RenderSection("loadBrandsscripts", required: false)
    @RenderSection("loadManufacturersscripts", required: false)
    @RenderSection("relatedToDataPicker", required: false)
    @RenderSection("selectedDosageForm", required: false) 
    <script>
        $(document).ready(function () {
            // $(".leftmenuitem").click(function () {
            //     // alert("aaa");
            //     $(".leftmenuitem").removeClass("active");
            // });
            // var a =""
            // localStorage.setItem('activeItem', a);
            function setActiveItem(itemId) {
                $('.sidebar a').removeClass('active');
                $('#' + itemId).addClass('active');
                localStorage.setItem('activeItem', itemId);
            }

            const activeItem = localStorage.getItem('activeItem');
            if (activeItem) {
                setActiveItem(activeItem);
            } else {
                // If no item is stored, set the default active item
                setActiveItem('mnuMedicines');
            }

            $('.sidebar a').click(function () {
                setActiveItem(this.id);
            });

            // $(window).on('beforeunload', function () {
            //     localStorage.removeItem('activeItem');
            // });

            $("#showMenuLink").click(function () {
                //alert("sss");
                var className = $("#siteTopnav").attr("class");
                //alert(className);
                if (className === "topnav d-none") {
                    $("#siteTopnav").addClass("responsive");
                    $("#siteTopnav").removeClass("d-none");
                    //$(".sidebar").addClass("d-none");
                } else {
                    $("#siteTopnav").removeClass("responsive");
                    $("#siteTopnav").addClass("d-none");
                }
            });

            // $("#dvSideBarContainer").on("mousemove",function () {
            //     alert("ff");
            //     $(".sidebar").removeClass("d-none");
            // });


            // $('#addExpirationDate').on('change', function () {
            //     let date = new Date($(this).val());
            //     alert(date);
            //     if (!isNaN(date.getTime())) {
            //         let day = String(date.getDate()).padStart(2, '0');
            //         let month = String(date.getMonth() + 1).padStart(2, '0');
            //         let year = date.getFullYear();
            //         $('#formattedDate').val(`${day}/${month}/${year}`);
            //     }
            // });

            // $('#addExpirationDate').on('change', function () {
            //     let date = new Date($(this).val());
            //     if (!isNaN(date.getTime())) {
            //         let day = String(date.getDate()).padStart(2, '0');
            //         let month = String(date.getMonth() + 1).padStart(2, '0');
            //         let year = date.getFullYear();
            //         // $(this).attr("data-display", `${day}/${month}/${year}`);
            //         $("#test").val(`${day}/${month}/${year}`);
            //     }
            // });
            
        });

    </script>
</body>
</html>
